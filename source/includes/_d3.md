# D3 Document
<a href="images/d3/d3-editor.png" data-lightbox="d3-document" data-title="Edit Screen" style="display: block; float:right;">
  ![alt text](./d3/d3-editor.png "Header")
</a>

This section is entirely for D3 documents only. Other types of documents may or many not have similar features. 

When creating or viewing a document, this window will show. It contains 2 parts: 

* Left pane: canvas 
* Right pane: editors

## Create New
<a href="images/d3/new-doc.png" data-lightbox="d3-document" data-title="New Document" style="display: block; float:right;">
  ![alt text](./d3/new-doc.png "New Document")
</a>

To create a new d3 document, on home screen after login go to: **D3 Documents > New Document**

This new doucment list includes two separate set of templates:

* Basic built in templates 
* User-set templates 

When creating a new document from built-in templates, a new and complete document will be created.
The last option in this list is the 'Import Github'. This feature allows users to import VIDA compatible documents from GitHub. 
For VIDA compatible structure, please visit <a href='https://github.com/vidalab/document_template' target='_blank'>Vida GitHub Template</a>

When creating a new document from user-set templates, a template child document will be created.

**Important:** user-set templates are regular documents and must have 'No-clone' disabled in order to show up in the list.

## Top Menu
 
This is designed to have similar user experience with a desktop app. It contains the following options (left to right):
 
* Vida logo - go back home
* D3 text - d3 document editor indicator
* File menu with additional dropdown options:
  * Get Embed Code - gets embed URLs for current document
  * Delete - removes current document
  * Exit - exits current edit document to go back home
* Save - comes with a shortcut as 'Ctrl+Return'
* Clone - clones current document. When cloning a template, the newly cloned document will become a child document.
* More option - allows custom view window arrangement

## Canvas
This section contains the visual presentation of the document where it combines the code, data, properties and styles together. It has three(3) different sections:

* Title: editable when selected
* Description: editable when selected
* SVG rendering space: the vector drawing from current document. This will be re-drawn upon the following triggers:
  * Save - when there's a code change and the document is being saved
  * Property change - a property change will immediately render a new SVG

**Important:** Saving a document with no change will not trigger the re-rendering.

## Editors

This sections contains the most important data for a document including settings. It contains the following tabs:

### Settings (Ctrl+1)

This tab shows all the possible settings for a regular document

* Template switch (regular doucment) or Template detach (child document)
* Sharing - share with individuals or teams
* Privacy - allow document to be public/unlisted/private. 
    - Public - can be seen and searched by users
    - Unlisted - cannot be searched, but can be seen to whoever has the document URL
    - Private - can only be seen by owner and shared individuals/teams
* Resource - import external javascript and stylesheet libraries. This also provides a list with some preloaded and suggested resources.
* Tags - allows documents to be searched and indexed properly
* Embed Custom Signature (PRO subscription only) when embed
    - Text
    - URL (redirect URL)
* Embed Widget switch - show/hide embed widget
* General info 
* No clone - enable/disable cloning
* Thumbnail - public image for the current document
  
### Data
<a href="images/d3/data-tab.png" data-lightbox="d3-document" data-title="New Document" style="display: block; float:right;">
  ![alt text](./d3/data-tab.png "New Document")
</a>

This tab contains a data editor. Users can choose to import data from a file. There're three (3) supported data type:

* CSV
* TSV
* JSON

Once saved, the parsed data is piped through the javascript code as 'data' variable with JSON structure. 
To better understand, one may print the structure in debug console.

This data tab has the editor shown as default. A grid can be viewed (non-editable) once data is saved first.

A d3 document can utilize a dataset document as its own data by setting a dataseting in this tab.
If a dataset is selected, all current document data will be removed. 
If a dataset is removed, the current data from dataset document is copied to the current d3 document.

### Properties
<a href="images/d3/prop-tab.png" data-lightbox="d3-document" data-title="New Document" style="display: block; float:right;">
  ![alt text](./d3/prop-tab.png "New Document")
</a>



**Important:** a property change will be saved and trigger rendering automatically .

### Javascript
<a href="images/d3/javascript-tab.png" data-lightbox="d3-document" data-title="New Document" style="display: block; float:right;">
  ![alt text](./d3/javascript-tab.png "New Document")
</a>

### Stylesheet
<a href="images/d3/css-tab.png" data-lightbox="d3-document" data-title="New Document" style="display: block; float:right;">
  ![alt text](./d3/css-tab.png "New Document")
</a>

### HTML

### Readme

### Shortcuts

## Templates

A document can be set as a template using the Template switch in Settings tab. By setting this, any further documents that are cloned from this template will be its children. 

### Parent
<a href="images/d3/template.png" data-lightbox="d3-document" data-title="Template Document" style="display: block; float:right;">
  ![alt text](./d3/template.png "Header")
</a>

A parent template or template is a regular document. When updating a template, its javascript, html and css code will be synchronized across its children.

### Child
<a href="images/d3/template-child.png" data-lightbox="d3-document" data-title="Child Document" style="display: block; float:right;">
  ![alt text](./d3/template-child.png "Header")
</a>

A child document can only apply its own data set and properties. The underlying code are mirrored from its parent template. 

## Embed
<a href="images/d3/embed.png" data-lightbox="d3-document" data-title="Embed Document" style="display: block; float:right;">
  ![alt text](./d3/embed.png "Embed")
</a>

## External Import

To import a visualization, please use the correct tab

* HTML
   * Additional HTML structure of a visualization
   * A div#canvas-svg is recommended 

* Javascript
  * Do not use 'select("body")' to append the svg. VIDA will automatically replace this with 'select("canvas-svg")' instead.
	* Use 'data' variable for JSON data passed from Data tab
	
* Stylesheet (CSS)
  * Styling code
  
* Data (CSV/TSV/JSON)
  * Import or cut and paste data 
  * To access, use 'data' variable in Javascript tab code

## Safe Mode
This mode is automatically set on because javascript code failed to complete evaluation/execution. Some of the reasons include: 

* being stucked in an infinite loop.
* bugs that terminate the javascript eval.
* taking too long and not finishing loading.

If this is due to bugs, you need to fix and save the code. Debugger console can be helpful.

Your code won't execute until this mode is disabled. You can disable this mode by going to Settings tab.



